{% extends 'base.html.twig' %}

{% block title %}Annonce
{% endblock %}

{% block body %}
	<div class="display">
		<section class="show">
			<div id="slider" class="flexslider">
				<ul class="slides">
					<li>
						<img src="{{ asset('assets/uploads/' ~ annonce.image) }}" alt="{{ annonce.image }}">
					</li>
					{% for img in annonce.images %}
						<li>
							<img src="{{ asset('assets/uploads/' ~ img.name) }}"/>
						</li>
					{% endfor %}
				</ul>
			</div>
			<div id="carousel" class="flexslider">
				<ul class="slides">
					<li>
						<img src="{{ asset('assets/uploads/' ~ annonce.image) }}" alt="{{ annonce.image }}">
					</li>
					{% for img in annonce.images %}
						<li>
							<img src="{{ asset('assets/uploads/' ~ img.name) }}"/>
						</li>
					{% endfor %}
				</ul>
			</div>
		</section>
		<section class="detailsShow">
			<div class="details">
				<div class="details__Annonce">
					<h3>{{ annonce.title }}</h3>
					<p>Description :
						{{ annonce.description }}
					</p>
				</div>
				<div>
					<p>Ville :
						{{ annonce.ville.title }}
					</p>

				</div>

				<div>
					<p>Code postal :
						{{ annonce.ville.codePostal }}
					</p>

				</div>

				<div>
					<p>Département
						{{ annonce.departement.title }}
					</p>

				</div>

				{# <p><img src="{{ annonce.image }}" alt=""></p> #}
				<div>
					<p>
						{% if annonce.superficie %}
							Superficie du batiment :
							{{ annonce.superficie }}m²
						{% endif %}
					</p>

				</div>

				<div>
					<p>
						{% if annonce.superficieTerrain %}
							Superficie du terrain :
							{{ annonce.superficieTerrain }}m²
						{% endif %}
					</p>

				</div>

				<div>
					<p>prix
						{{ annonce.price | number_format(0,',', ' ')}}
						€</p>

				</div>

				<div>
					<p>Categorie(s) :
						{% for cat in annonce.category %}
							{{ cat.title }}
						{% endfor %}
					</p>
				</div>

				<div>
					<p>Status:
						{{ annonce.status ? 'Vente' : 'Location' }}
					</p>

				</div>


				<div>
					<p>État:
						{{ annonce.etat}}
					</p>
				</div>

				<div>
					<p>CLasse énergétique:
						{% if annonce.dpe %}
							{{ annonce.dpe }}
						{% endif %}
					</p>
				</div>

				<div>
					<p>CLass énergétique:</p>
					{% if annonce.ges %}
						{{ annonce.ges }}
					{% endif %}
				</div>

				<div>
					<p>
						{% if annonce.nbrePieces %}
							Nombre de pièces  :
							{{ annonce.nbrePieces }}
						{% endif %}
					</p>
				</div>
				<div>
					<p>
						{% if annonce.nbreChambre %}
							Nombre de chambre  :
							{{ annonce.nbreChambre }}
						{% endif %}
					</p>
				</div>

				<div>
					<p>
						{% if annonce.salleBain %}
							Nombre de salle de bain  :
							{{ annonce.salleBain }}
						{% endif %}
					</p>
				</div>

				<div>
					<p>
						{% if annonce.wc %}
							Nombre de wc  :
							{{ annonce.wc }}
						{% endif %}
					</p>
				</div>

				<div>
					<p>
						{% if annonce.garage %}
							Nombre de garage  :
							{{ annonce.garage }}
						{% endif %}
					</p>
				</div>

				<div>
					<p>
						{% if annonce.piscine %}
							Nombre de picine  :
							{{ annonce.piscine }}
						{% endif %}
					</p>
				</div>

				<div class="red">
					{% if is_granted("ROLE_USER") %}
						{% for favoris in annonce.favoris %}
							{% if favoris.id == app.user.id %}
								<a href="{{ path('retrait_favoris', {id: annonce.id}) }}">
									<i class="fas fa-heart"></i>
								</a>
							{% else %}
								<a href="{{ path('ajout_favoris', {id: annonce.id}) }}">
									<i class="far fa-heart"></i>
								</a>
							{% endif %}

						{% else %}
							<a href="{{ path('ajout_favoris', {id: annonce.id}) }}">
								<i class="far fa-heart"></i>
							</a>
						{% endfor %}
					{% endif %}
				</div>
			</div>
			<input type="button" value="Retour" onclick="history.go(-1)"></div>
		</section>
	</div>
	<div class="log">
		{{ form_start(form, {attr: {'novalidate': 'novalidate'}}) }}

		{% if is_granted('ROLE_USER') %}
			<div class="input-cont">Nom :
				{{ user.name }}
			</div>
			<div class="input-cont">Prénom :
				{{ user.username }}
			</div>
			<div class="input-cont">Email :
				{{ user.email }}
			</div>
			{% if user.phone != NULL %}
				<div class="input-cont">Téléphone :
					{{ user.phone }}
				</div>
		{% endif %}

		{% else %}

			<div class="input-cont">
				{{ form_widget(form.email) }}
				{{form_label(form.email)}}
				<div class="border1"></div>
			</div>
			<div class="input-cont">
				{{ form_widget(form.name) }}
				{{form_label(form.name)}}
				<div class="border2"></div>
			</div>
			<div class="input-cont">
				{{ form_widget(form.surname) }}
				{{form_label(form.surname)}}
				<div class="border2"></div>
			</div>
			<div class="input-cont">
				{{ form_widget(form.phone) }}
				{{form_label(form.phone)}}
				{{form_errors(form.phone)}}
				<div class="border2"></div>
			</div>
		{% endif %}
		<div class="input-cont">
			{{ form_widget(form.message) }}
			{{form_label(form.message)}}
			<div class="border2"></div>
		</div>
		<p class="help">
			*Obligatoire
		</p>
		<input type="submit" value="Envoyez">
		{{ form_end(form) }}
	</div>
{% endblock %}
